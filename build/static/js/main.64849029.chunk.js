(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(7),l=n.n(o),r=(n(14),n(1)),i=n(2),c=n(4),u=n(3),m=n(5),p=function(e){return e.data.isOpen?e.data.hasMine?s.a.createElement("div",{className:"cell open",onContextMenu:function(e){e.preventDefault()},onClick:function(){return e.open(e.data)}},s.a.createElement("span",null,s.a.createElement("i",{className:"icon ion-android-radio-button-on"}))):0===e.data.count?s.a.createElement("div",{className:"cell open",onContextMenu:function(t){t.preventDefault(),e.flag(e.data)},onClick:function(){return e.open(e.data)}}):s.a.createElement("div",{className:"cell open",onContextMenu:function(e){e.preventDefault()},onClick:function(){return e.open(e.data)}},e.data.count):e.data.hasFlag?s.a.createElement("div",{className:"cell open-flag",onContextMenu:function(t){t.preventDefault(),e.flag(e.data)},onClick:function(){return e.open(e.data)}},s.a.createElement("span",null,s.a.createElement("i",{className:"icon ion-flag"}))):s.a.createElement("div",{className:"cell",onContextMenu:function(t){t.preventDefault(),e.flag(e.data)},onClick:function(){return e.open(e.data)}})},f=function(e){var t=e.cells.map(function(t,n){return s.a.createElement(p,{data:t,open:e.open,flag:e.flag,key:n})});return s.a.createElement("div",{className:"row"},t)},h=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).createBoard=function(e){for(var t=[],n=0;n<e.rows;n++){t.push([]);for(var a=0;a<e.columns;a++)t[n].push({x:a,y:n,count:0,isOpen:!1,hasMine:!1,hasFlag:!1})}for(var s=0;s<e.mines;s++){var o=Math.floor(Math.random()*e.rows),l=Math.floor(Math.random()*e.columns),r=t[o][l];r.hasMine?s--:r.hasMine=!0}return t},n.flag=function(e){if("ended"!==n.props.status){var t=n.state.rows;e.hasFlag=!e.hasFlag,n.setState({rows:t}),n.props.changeFlagAmount(e.hasFlag?-1:1)}},n.open=function(e){"ended"!==n.props.status&&new Promise(function(t){t(n.findMines(e))}).then(function(t){var a=n.state.rows,s=a[e.y][e.x];if(s.hasMine&&0===n.props.openCells){console.log("mine was on first click");var o=n.createBoard(n.props);n.setState({rows:o},function(){n.open(e)})}else e.hasFlag||s.isOpen||(n.props.onCellClick(),s.isOpen=!0,s.count=t,n.setState({rows:a}),s.hasMine||0!==t||n.openAroundCell(e),s.hasMine&&0!==n.props.openCells&&n.props.endGame())})},n.findMines=function(e){for(var t=0,a=-1;a<=1;a++)for(var s=-1;s<=1;s++)e.y+a>=0&&e.x+s>=0&&e.y+a<n.state.rows.length&&e.x+s<n.state.rows[0].length&&(!n.state.rows[e.y+a][e.x+s].hasMine||0===a&&0===s||t++);return t},n.openAroundCell=function(e){for(var t=n.state.rows,a=-1;a<=1;a++)for(var s=-1;s<=1;s++)e.y+a>=0&&e.x+s>=0&&e.y+a<n.state.rows.length&&e.x+s<n.state.rows[0].length&&(n.state.rows[e.y+a][e.x+s].hasMine||t[e.y+a][e.x+s].isOpen||n.open(t[e.y+a][e.x+s]))},n.state={rows:n.createBoard(e)},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){(this.props.openCells>e.openCells||this.props.columns!==e.columns)&&this.setState({rows:this.createBoard(e)})}},{key:"render",value:function(){var e=this,t=this.state.rows.map(function(t,n){return s.a.createElement(f,{cells:t,open:e.open,flag:e.flag,key:n})});return s.a.createElement("div",{className:"board"},t)}}]),t}(a.Component),d=function(e){var t=Math.floor(e.time/60),n=e.time-60*t||0;n=n<10?"0".concat(n):n;var a="".concat(t,":").concat(n),o="running"===e.status||"waiting"===e.status||"winner"===e.status?s.a.createElement("i",{className:"icon ion-happy-outline yellow"}):s.a.createElement("i",{className:"icon ion-sad-outline yellow"});return s.a.createElement("div",{className:"board-head"},s.a.createElement("div",{className:"flag-count"},e.flagsUsed),s.a.createElement("button",{className:"reset",onClick:e.reset},o),s.a.createElement("div",{className:"timer"},a))},g=(n(15),function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).checkForWinner=function(){e.state.mines+e.state.openCells>=e.state.rows*e.state.columns&&e.setState({gameStatus:"winner"},alert("you won!"))},e.setInterval=function(t,n){e.intervals.push(setInterval(t,n))},e.reset=function(){e.intervals.map(clearInterval),e.setState(Object.assign({},e.baseState),function(){e.intervals=[]})},e.tick=function(){if(e.state.openCells>0&&"running"===e.state.gameStatus){var t=e.state.time+1;e.setState({time:t})}},e.endGame=function(){e.setState({gameStatus:"ended"})},e.changeFlagAmount=function(t){e.setState({flagCount:e.state.flagCount+t})},e.handleCellClick=function(){0===e.state.openCells&&"running"!==e.state.gameStatus&&e.setState({gameStatus:"running"},e.setInterval(e.tick,1e3)),e.setState(function(e){return{openCells:e.openCells+1}})},e.state={gameStatus:"waiting",time:0,flagCount:10,openCells:0,mines:10,rows:10,columns:10},e.baseState=e.state,e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e,t){"running"===this.state.gameStatus&&this.checkForWinner()}},{key:"componentWillMount",value:function(){this.intervals=[]}},{key:"render",value:function(){return s.a.createElement("div",{className:"minesweeper"},s.a.createElement(d,{time:this.state.time,flagsUsed:this.state.flagCount,reset:this.reset,status:this.state.gameStatus}),s.a.createElement(h,{openCells:this.state.openCells,mines:this.state.mines,rows:this.state.rows,columns:this.state.columns,endGame:this.endGame,status:this.state.gameStatus,onCellClick:this.handleCellClick,changeFlagAmount:this.changeFlagAmount}))}}]),t}(a.Component));l.a.render(s.a.createElement(g,null),document.getElementById("root"))},8:function(e,t,n){e.exports=n(16)}},[[8,1,2]]]);
//# sourceMappingURL=main.64849029.chunk.js.map